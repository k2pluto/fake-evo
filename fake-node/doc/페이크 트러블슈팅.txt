페이크에서 마감시간전에 베팅을 했지만 처리시간으로 인해 에볼루션에서 칩이 Reject이 된 경우 어떻게 처리 할지

# {$.args.errorCode="1007"} 이렇게 검색하면 많이 나온다

1. seamless에서 베팅을 받는데 betResponse로 통과된 칩만 받는다. ( 만약에 betResponse가 처리되기 전에 seamless 콜을 받는다면..??)

2. seamless에서 베팅을 받은 표시를 해놓고 실제 베팅은 playerBettingState 가 Accepted 일 때 받는다.

3. 로그를 betOrg 대로 만든다. ( 화면상에 표기랑 달라질 확률이 너무 높다.)


canRepeat의 AllBets, MainOnly, MainAndPairs 의 의미를 파악해서 구현해 놔야 할듯..?


베팅금액 < 남은금액 < 베팅금액+20%수수료 사이에서 Repeat 버튼이 활성화 되서 누르면 에러메시지가 나오는데 서버에서는 betOrg에 저장되는 버그가 있었다.
-> 애초에 Repeat 버튼이 활성화 된게 버그 였음. lastGameChips에 Lightning 칩도 넣으니깐 Repeat 버튼 활성이 안됨

-> 현재 2023-10-11일 정품에서도 위에 상황에 Repeat 버튼이 활성화 되고 베팅 시도 하면 거절이 남

4. 1월 28일날 에볼루션 모바일에서 테이블에서 로비로 나올 때 딜러 없음 이라는 팝업창이 계속 떠서 살펴보니 에볼루션 /config api 에서 virtual table id 파라미터 값이 새로 생겼던 문제 였음

5. 2024-3-1일 패치로 에볼루션 서버에 CloudFront 가 붙었는데 axios가 먹통이 되고 web socket 접속이 안되는 현상이 일어났다.
Axios 는 http2 로 변경해서 사용을 했고 websocket이 문제였는데

테스트를 하다보니 아래와 같은 테스트 결과가 생겼다.
1. 로컬에서 바로 실행 -> 됨
2. 로컬에서 도커로 실행 -> 안됨
3. AWS 에서 바로 실행 -> 안됨
4. AWS 에서 도커로 실행 -> 안됨
5. 네이버에서 도커로 실행 -> 안됨
6. 네이버에서 바로 실행 -> 됨
7. 윈도우에서 도커로 실행 -> 안됨

여기서 도커에서만 안되는 현상이 나왔는데 정확한 원인은 파악하지 못했고 노드버전에도 영향이 있을까 여러번 테스트를 해봤는데
노드21, 20, 18 버전은 안됬지만 16버전에서 웹소켓 접속이 되길래 그걸로 해결을 봤다.