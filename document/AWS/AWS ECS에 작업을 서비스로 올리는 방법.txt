1. 서비스를 만들려고 하는 클러스터로 들어간다.

2. 서비스 탭에서 생성을 누른다.

3. 서비스 구성 셋팅

시작 유형은 EC2

작업정의와 서비스 이름을 설정한다.

서비스 유형은 REPLICA로 설정한다.

작업 개수는 필요한 만큼 하는데 보통은 1

배포 유형은 롤링 업데이트

배치 템플릿은 균형 분산

4. 네트워크 구성

로드 밸런싱이 필요할 때 로드밸런서는 미리 생성해 둔다.

HTTPS 가 필요하면 Application Load Balancer

WSS 가 필요하면 Network Load Balancer

를 미리 생성한다.

로드 밸런싱할 컨테이너의 작업정의에서 Host 포트를 0으로 설정한다. (이래야 롤링업데이트가 가능하다.)

그 후 로드 밸런서에 추가 버튼을 누른다.

대상 그룹은 왠만하면 여기서 새로 생성한다.

서비스 검색 통합 활성화는 끈다.

5. Auto Scaling (선택사항)
 원하는 서비스 개수를 조정하지 마십시오 로 선택한다.

6. 다음을 누르면 서비스가 생성된다.

7. 만약 롤링업데이트로 업데이트를 진행하고 싶은 경우 클러스터 보안그룹 셋팅에서 모든 TCP 포트를 VPC 주소(예 172.31.0.0/16)에 매핑시켜 인바운드에 추가한다.

8. 만약 로드 밸런스로 WSS 를 사용하고 싶다면 Network Load Balancer로 생성한후 TLS 프로토콜로 열어두고 보안 정책은 ELBSecurityPolicy-TLS-1-2 이상을 선택한다.

그리고 인증서를 선택한 후 인증서에 있는 주소로 접속해야 접속이 가능해 진다.